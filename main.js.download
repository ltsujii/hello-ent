function reset(){$.getJSON("json/resume.json",function(e){builder.setFormValues(e)})}function clear(){builder.setFormValues({})}function enableTSEplugin(){var e=$("#preview"),n=$(".tse-scrollable");n.TrackpadScrollEmulator(),n.on("startDrag",function(){e.addClass("scroll")}),n.on("endDrag",function(){e.removeClass("scroll")})}function enableCSStransitions(){setTimeout(function(){$("body").removeClass("preload")},200)}var builder;jQuery(document).ready(function(e){function n(n){var t="flat",a=window.location.hash;""!=a&&(t=a.replace("#","")),e.ajax({type:"POST",contentType:"application/json",data:JSON.stringify({resume:n},null,"  "),url:"https://themes.jsonresume.org/"+t,success:function(e){i.contents().find("body").html(e),o.removeClass("loading")}}),function(){e("#theme-current").html(t),e("#themes-list .item[href='#"+t+"']").addClass("active").siblings().removeClass("active")}()}var t=e("#form");builder=new Builder(t),e.getJSON("json/schema.json",function(e){builder.init(e),reset()});var o=e("#preview"),i=e("#iframe");!function(){var e=null;t.on("change",function(){clearTimeout(e),o.addClass("loading"),e=setTimeout(function(){var e=builder.getFormValues();t.data("resume",e),n(e)},200)})}(),enableTSEplugin(),enableCSStransitions(),e("#export").on("click",function(){var e=t.data("resume");download(JSON.stringify(e,null,"  "),"resume.json","text/plain")}),e("#export").tooltip({container:"body"}),e("#reset").on("click",function(){confirm("Are you sure?")&&reset()}),e("#clear").on("click",function(){confirm("Are you sure?")&&clear()}),e("#sidebar .tabs a").on("click",function(){e(this).addClass("active").siblings().removeClass("active")}),function(){var n=e("#themes-list"),o=n.find(".item").remove();e.getJSON("https://themes.jsonresume.org/themes.json",function(e){var t=e.themes;if(t)for(var i in t)o.clone().attr("href","#"+i).find(".name").html(i).end().find(".version").html(t[i].versions.shift()).end().appendTo(n)}),n.on("click",".item",function(){t.trigger("change")})}();var a=e("#json-editor");!function(){var e=null;a.on("keyup",function(){clearTimeout(e),e=setTimeout(function(){try{var e=a.val();builder.setFormValues(JSON.parse(e))}catch(e){}},200)})}(),t.on("change",function(){var e=builder.getFormValuesAsJSON();a.val()!==e&&a.val(e)}),e("#sidebar .view").on("click","a",function(n){n.preventDefault();var t=e(this),o=t.data("type");t.addClass("active").siblings().removeClass("active"),a.toggleClass("show","json"==o)})});